# draft-guide-jms-cqrs

Command query responsibility segregation (CQRS) microservices architectures

Navigate to the finish directory.
```
cd finish
```

Start the database
```
./scripts/startPostgres.sh
```

Build and install the models
```
mvn -pl models clean install
```

Start `inventory` service in dev mode:
```
mvn -pl inventory liberty:dev
```

Start `query` service in dev mode:
```
mvn -pl query liberty:dev
```

Start `command` service in dev mode:
```
mvn -pl command liberty:dev
```

Visit http://localhost:9080 or try out http://localhost:9080/openapi/ui/ or

Get
```
curl http://localhost:9082/api/systems
```

Post
```
curl -X POST \
  http://localhost:9080/inventory/systems \
  -H 'accept: */*' \
  -H 'Content-Type: application/json' \
  -d '{ "id": 0, "hostname": "host4", "osName": "Mac", "javaVersion": "17", "heapSize": 1200 }'
```

Put
```
curl -X PUT \
  http://localhost:9080/inventory/systems/host4 \
  -H 'accept: */*' \
  -H 'Content-Type: application/json' \
  -d '{ "id": 0, "hostname": "host4", "osName": "Mac", "javaVersion": "22", "heapSize": 1110 }'
```

Delete
```
curl -X DELETE http://localhost:9080/inventory/systems/host4
```

Tear Down

- stop all dev mode for the inventory, command, and query services
- stop database
```
cd finish
./scripts/stopPostgres.sh
```

## Issues
- ...